
# NIO
## 网络编程模型

1.阻塞式IO

2.非阻塞式IO

3.NIO（select ,poll ,epoll）

4.信号量驱动式IO

5.异步IO

 

select的缺点：

1.每次调用都需要把 fd 集合从用户态拷贝到内核心态，在 fd 集合较大时性能差

2.每次检查准备好的 fd 都需要遍历整个 fd 集合

3.存在最大文件数限制。 可以修改 FD_SETSIZE 来改变但不建议这样做

poll的问题：和 select 很相似 但是采用的是链式存储 且无最大文件数限制

epoll:

1.通过一个文件描述符来监听所有关心的 fd 集合，只需要拷贝一次，大大提升了性能

2.通用回调机制来取代轮询机制，提升了效率,另外 epoll_wait轮询的数组中也只有准备好的 fd 而不是全部。

3.无最大文件数限制

4.支持两种触发方式。

LT 水平触发：当有可读可写事件时 epoll_wait会通知程序处理，如果没处理完，下次调用 epoll_wait时还会通知继续处理。默认处理方式

ET 边缘触发 ：epoll_wait 通知程序去处理时，如果没有处理完，下次不会再通知。效率更高。

5.由于回调和通知机制，在连接数少且不活跃的状态，性能会比 select 差一点

 

JAVA中的NIO 中的 selector 但其底层实现是 epoll