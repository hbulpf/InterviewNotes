<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>InterviewNotes</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="面试笔记">
    <link rel="preload" href="/assets/css/0.styles.7950d16d.css" as="style"><link rel="preload" href="/assets/js/app.60168104.js" as="script"><link rel="preload" href="/assets/js/2.9ef5e12b.js" as="script"><link rel="preload" href="/assets/js/36.73f2576d.js" as="script"><link rel="prefetch" href="/assets/js/10.cbb282fc.js"><link rel="prefetch" href="/assets/js/11.cdc27a66.js"><link rel="prefetch" href="/assets/js/12.ab8e82c7.js"><link rel="prefetch" href="/assets/js/13.53b1283e.js"><link rel="prefetch" href="/assets/js/14.8c3425fa.js"><link rel="prefetch" href="/assets/js/15.2c1b20e2.js"><link rel="prefetch" href="/assets/js/16.d2bc9b08.js"><link rel="prefetch" href="/assets/js/17.af04b44e.js"><link rel="prefetch" href="/assets/js/18.36d8b51f.js"><link rel="prefetch" href="/assets/js/19.839c51be.js"><link rel="prefetch" href="/assets/js/20.8703ba87.js"><link rel="prefetch" href="/assets/js/21.ec8a48db.js"><link rel="prefetch" href="/assets/js/22.02fa06cd.js"><link rel="prefetch" href="/assets/js/23.8003129d.js"><link rel="prefetch" href="/assets/js/24.49627a6e.js"><link rel="prefetch" href="/assets/js/25.4bc883a8.js"><link rel="prefetch" href="/assets/js/26.fe7b47f6.js"><link rel="prefetch" href="/assets/js/27.1da201b3.js"><link rel="prefetch" href="/assets/js/28.efdeafac.js"><link rel="prefetch" href="/assets/js/29.790c40a3.js"><link rel="prefetch" href="/assets/js/3.d8a31682.js"><link rel="prefetch" href="/assets/js/30.26da2d35.js"><link rel="prefetch" href="/assets/js/31.8569e720.js"><link rel="prefetch" href="/assets/js/32.394a43c4.js"><link rel="prefetch" href="/assets/js/33.059e39bc.js"><link rel="prefetch" href="/assets/js/34.52c2a972.js"><link rel="prefetch" href="/assets/js/35.3219d2fd.js"><link rel="prefetch" href="/assets/js/37.78b40203.js"><link rel="prefetch" href="/assets/js/38.5b08bd75.js"><link rel="prefetch" href="/assets/js/39.710d1f05.js"><link rel="prefetch" href="/assets/js/4.5ed19beb.js"><link rel="prefetch" href="/assets/js/40.8638dba5.js"><link rel="prefetch" href="/assets/js/41.532c5b33.js"><link rel="prefetch" href="/assets/js/42.b7b9d2c2.js"><link rel="prefetch" href="/assets/js/43.4ead7e96.js"><link rel="prefetch" href="/assets/js/44.b9192d5d.js"><link rel="prefetch" href="/assets/js/45.fc295a45.js"><link rel="prefetch" href="/assets/js/5.feba2b90.js"><link rel="prefetch" href="/assets/js/6.fa972741.js"><link rel="prefetch" href="/assets/js/7.29e8ee4b.js"><link rel="prefetch" href="/assets/js/8.2f455837.js"><link rel="prefetch" href="/assets/js/9.dcabcf46.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7950d16d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">InterviewNotes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hadoop/" class="nav-link">
  hadoop
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/数据库/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/操作系统/" class="nav-link">
  操作系统
</a></div><div class="nav-item"><a href="/Android.html" class="nav-link">
  Android
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese/" class="nav-link">
  Chinese
</a></li><li class="dropdown-item"><!----> <a href="/language/japanese/" class="nav-link">
  Japanese
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hadoop/" class="nav-link">
  hadoop
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/数据库/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/操作系统/" class="nav-link">
  操作系统
</a></div><div class="nav-item"><a href="/Android.html" class="nav-link">
  Android
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese/" class="nav-link">
  Chinese
</a></li><li class="dropdown-item"><!----> <a href="/language/japanese/" class="nav-link">
  Japanese
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">面试笔记</a></li><li><a href="/Java/" class="sidebar-link">Java</a></li><li><a href="/复习资料.html" class="sidebar-link">复习资料</a></li><li><a href="/求职准备.html" class="sidebar-link">求职准备</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><strong>1、如何批量删除或者停止运行的容器？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>docker kill/rm `docker ps -aq`
</code></pre></div><p><strong>2、如何查看镜像支持的环境变量？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>使用sudo docker run IMAGE env
</code></pre></div><p><strong>3、本地的镜像文件都存放在哪里</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Docker相关的本地资源存放在/var/lib/docker/目录下，其中container目录存放容器信息，graph目录存放镜像信息，aufs目录下存放具体的镜像底层文件。
</code></pre></div><p><strong>4、构建Docker镜像应该遵循哪些原则？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>整体远侧上，尽量保持镜像功能的明确和内容的精简，要点包括： 
# 尽量选取满足需求但较小的基础系统镜像，建议选择debian:wheezy镜像，仅有86MB大小 
# 清理编译生成文件、安装包的缓存等临时文件 
# 安装各个软件时候要指定准确的版本号，并避免引入不需要的依赖 
# 从安全的角度考虑，应用尽量使用系统的库和依赖 
# 使用Dockerfile创建镜像时候要添加.dockerignore文件或使用干净的工作目录
</code></pre></div><p><strong>5、容器退出后，通过docker ps 命令查看不到，数据会丢失么？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>容器退出后会处于终止（exited）状态，此时可以通过 docker ps -a 查看，其中数据不会丢失，还可以通过docker start 来启动，只有删除容器才会清除数据。
在这里还要注意开启容器的时候是否添加了--rm参数
</code></pre></div><p><strong>6、如何临时退出一个正在交互的容器的终端，而不终止它？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>按Ctrl+p，后按Ctrl+q，如果按Ctrl+c会使容器内的应用进程终止，进而会使容器终止。
</code></pre></div><p><strong>7、很多应用容器都是默认后台运行的，怎么查看它们的输出和日志信息？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>使用docker logs，后面跟容器的名称或者ID信息
</code></pre></div><p><strong>8、使用docker port 命令映射容器的端口时，系统报错Error: No public port ‘80’ published for …，是什么意思？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>创建镜像时Dockerfile要指定正确的EXPOSE的端口，容器启动时指定PublishAllport=true
</code></pre></div><p><strong>9、可以在一个容器中同时运行多个应用进程吗？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>一般不推荐在同一个容器内运行多个应用进程，如果有类似需求，可以通过额外的进程管理机制，比如supervisord来管理所运行的进程
</code></pre></div><p><strong>10、如何控制容器占用系统资源（CPU，内存）的份额？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>在使用docker create命令创建容器或使用docker run 创建并运行容器的时候，可以使用-c|–cpu-shares[=0]参数来调整同期使用CPU的权重，使用-m|–memory参数来调整容器使用内存的大小。
</code></pre></div><p><strong>11、仓库（Repository）、注册服务器（Registry）、注册索引（Index）有何关系？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>首先，仓库是存放一组关联镜像的集合，比如同一个应用的不同版本的镜像，注册服务器是存放实际的镜像的地方，注册索引则负责维护用户的账号，权限，搜索，标签等管理。注册服务器利用注册索引来实现认证等管理。
</code></pre></div><p><strong>12 、从非官方仓库（如：dl.dockerpool.com）下载镜像的时候，有时候会提示“Error：Invaild registry endpoint https://dl.docker.com:5000/v1/…”?</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Docker 自1.3.0版本往后以来，加强了对镜像安全性的验证，需要手动添加对非官方仓库的信任。 
DOCKER_OPTS=”–insecure-registry dl.dockerpool.com:5000” 
重启docker服务
</code></pre></div><p><strong>13、Docker的配置文件放在那里。如何修改配置？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Ubuntu系统下Docker的配置文件是/etc/default/docker，CentOS系统配置文件存放在/etc/sysconfig/docker
</code></pre></div><p><strong>14、如何更改Docker的默认存储设置？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Docker的默认存放位置是/var/lib/docker,如果希望将Docker的本地文件存储到其他分区，可以使用Linux软连接的方式来做。
</code></pre></div><p><strong>15、Docker与LXC（Linux Container）有何不同？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>LXC利用Linux上相关技术实现容器，Docker则在如下的几个方面进行了改进：

移植性：通过抽象容器配置，容器可以实现一个平台移植到另一个平台； 
镜像系统：基于AUFS的镜像系统为容器的分发带来了很多的便利，同时共同的镜像层只需要存储一份，实现高效率的存储； 
版本管理：类似于GIT的版本管理理念，用户可以更方面的创建、管理镜像文件； 
仓库系统：仓库系统大大降低了镜像的分发和管理的成本； 
周边工具：各种现有的工具（配置管理、云平台）对Docker的支持，以及基于Docker的Pass、CI等系统，让Docker的应用更加方便和多样化。
</code></pre></div><p><strong>16 、Docker与Vagrant有何不同？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>两者的定位完全不同 
Vagrant类似于Boot2Docker（一款运行Docker的最小内核），是一套虚拟机的管理环境，Vagrant可以在多种系统上和虚拟机软件中运行，可以在Windows。Mac等非Linux平台上为Docker支持，自身具有较好的包装性和移植性。 
原生Docker自身只能运行在Linux平台上，但启动和运行的性能都比虚拟机要快，往往更适合快速开发和部署应用的场景。
</code></pre></div><p><strong>17、开发环境中Docker与Vagrant该如何选择？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Docker不是虚拟机，而是进程隔离，对于资源的消耗很少，单一开发环境下Vagrant是虚拟机上的封装，虚拟机本身会消耗资源。
</code></pre></div><p><strong>18 、如何将一台宿主机的docker环境迁移到另外一台宿主机？</strong></p> <div class="language- extra-class"><pre class="language-text"><code>停止Docker服务，将整个docker存储文件复制到另外一台宿主机上，然后调整另外一台宿主机的配置即可
</code></pre></div><p><strong>19、Docker容器创建后，删除了/var/run/netns 目录下的网络名字空间文件，可以手动恢复它：</strong></p> <div class="language- extra-class"><pre class="language-text"><code># 查看容器进程ID，比如1234
sudo docker inspect --format='{{. State.pid}}' $container_id 
1234
# 到proc目录下，把对应的网络名字空间文件链接到/var/run/netns,然后通过正常的系统命令查看操作容器的名字空间。
</code></pre></div><p><strong>20、给docker容器分配静态ip地址</strong></p> <div class="language- extra-class"><pre class="language-text"><code>方法1:使用pipework [https://blog.csdn.net/qq_34021712/article/details/73350738]
方法2：创建一个虚拟网桥和一个虚拟网卡，给该网卡分配一个外网地址，建立容器后（如容器ip为：172.16.25.2）,将该外网ip和容器ip使用dnat做nat网络地址转换，设好出入站映射规则即可。[http://blog.51cto.com/dl528888/1604167]
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.60168104.js" defer></script><script src="/assets/js/2.9ef5e12b.js" defer></script><script src="/assets/js/36.73f2576d.js" defer></script>
  </body>
</html>
